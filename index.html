<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Stacja pogodowa ESP32</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB0dApYE4FO5vQeTL1fPwvqoa8GVaY9kN0",
      authDomain: "stacja-pogodowa-esp32.firebaseapp.com",
      databaseURL: "https://stacja-pogodowa-esp32-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "stacja-pogodowa-esp32",
      storageBucket: "stacja-pogodowa-esp32.firebasestorage.app",
      messagingSenderId: "327741512746",
      appId: "1:327741512746:web:fa70dae8116eed4ad93753",
      measurementId: "G-BHD64LQKBD"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.addEventListener("DOMContentLoaded", () => {
      const path = ref(db, "sensors");

      const el = (id) => document.getElementById(id);

      onValue(path, (snapshot) => {
        const data = snapshot.val();
        if (data) {
          el("humidity").textContent = data.humidity + " %";
          el("pressure").textContent = data.pressure + " hPa";
          el("temperature_avg").textContent = data.temperature_avg + " °C";
          el("temperature_bmp").textContent = data.temperature_bmp + " °C";
          el("temperature_dht").textContent = data.temperature_dht + " °C";
        }
      });
    });
  </script>
</head>
<body>
  <h1>Dane ze stacji pogodowej ESP32</h1>
  <ul>
    <li>Wilgotność: <span id="humidity">...</span></li>
    <li>Ciśnienie: <span id="pressure">...</span></li>
    <li>Średnia temperatura: <span id="temperature_avg">...</span></li>
    <li>Temperatura BMP: <span id="temperature_bmp">...</span></li>
    <li>Temperatura DHT: <span id="temperature_dht">...</span></li>
  </ul>
</body>
</html>